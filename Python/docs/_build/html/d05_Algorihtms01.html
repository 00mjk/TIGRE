

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Demo 5: Algorithms01 &mdash; pytigre  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html" class="icon icon-home"> pytigre
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="d01_create_geometry.html">Demo 01: Describing your geometry</a></li>
<li class="toctree-l1"><a class="reference internal" href="d02_sample_data.html">Demo 02: Sample data in TIGRE</a></li>
<li class="toctree-l1"><a class="reference internal" href="d03_simple_image_reconstruction.html">Demo 3: Simple Image reconstruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="d04_plottingfunctions.html">Demo 4: How to use plotting functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Need Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pytigre</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Demo 5: Algorithms01</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/d05_Algorihtms01.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Demo-5:-Algorithms01">
<h1>Demo 5: Algorithms01<a class="headerlink" href="#Demo-5:-Algorithms01" title="Permalink to this headline">¶</a></h1>
This demo will demonstrate the options for plotting projections and images on TIGRE. The functions have been in previous demos, but in here an exaustive explanation and usage of them is given.<div class="section" id="Define-Geometry">
<h2>Define Geometry<a class="headerlink" href="#Define-Geometry" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">tigre</span>
<span class="n">geo</span><span class="o">=</span><span class="n">tigre</span><span class="o">.</span><span class="n">geometry_default</span><span class="p">(</span><span class="n">high_quality</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Load-data-and-generate-projections">
<h2>Load data and generate projections<a class="headerlink" href="#Load-data-and-generate-projections" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">tigre.utilities.Ax</span> <span class="kn">import</span> <span class="n">Ax</span>
<span class="kn">from</span> <span class="nn">tigre.demos.Test_data</span> <span class="kn">import</span> <span class="n">data_loader</span>
<span class="c1"># define angles</span>
<span class="n">angles</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="c1"># load head phantom data</span>
<span class="n">head</span><span class="o">=</span><span class="n">data_loader</span><span class="o">.</span><span class="n">load_head_phantom</span><span class="p">(</span><span class="n">number_of_voxels</span><span class="o">=</span><span class="n">geo</span><span class="o">.</span><span class="n">nVoxel</span><span class="p">)</span>
<span class="c1"># generate projections</span>
<span class="n">projections</span><span class="o">=</span><span class="n">Ax</span><span class="p">(</span><span class="n">head</span><span class="p">,</span><span class="n">geo</span><span class="p">,</span><span class="n">angles</span><span class="p">,</span><span class="s1">&#39;interpolated&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Usage-of-FDK">
<h2>Usage of FDK<a class="headerlink" href="#Usage-of-FDK" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">tigre.algorithms</span> <span class="kn">as</span> <span class="nn">algs</span>
<span class="k">print</span><span class="p">(</span><span class="n">help</span><span class="p">(</span><span class="n">algs</span><span class="o">.</span><span class="n">fdk</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on function FDK in module tigre.algorithms.single_pass_algorithms:

FDK(proj, geo, angles, **kwargs)
      solves CT image reconstruction.

      :param proj: np.array(dtype=float32),
       Data input in the form of 3d

      :param geo: tigre.utilities.geometry.Geometry
       Geometry of detector and image (see examples/Demo code)

      :param angles: np.array(dtype=float32)
       Angles of projection, shape = (nangles,3) or (nangles,)

      :param filter: str
       Type of filter used for backprojection
       opts: &#34;shep_logan&#34;
             &#34;cosine&#34;
             &#34;hamming&#34;
             &#34;hann&#34;

      :param verbose: bool
       Feedback print statements for algorithm progress

      :param kwargs: dict
       keyword arguments

      :return: np.array(dtype=float32)

      Usage:
      -------
      &gt;&gt;&gt; import tigre
      &gt;&gt;&gt; import tigre.algorithms as algs
      &gt;&gt;&gt; import numpy
      &gt;&gt;&gt; from tigre.demos.Test_data import data_loader
      &gt;&gt;&gt; geo = tigre.geometry(mode=&#39;cone&#39;,default_geo=True,
      &gt;&gt;&gt;                         nVoxel=np.array([64,64,64]))
      &gt;&gt;&gt; angles = np.linspace(0,2*np.pi,100)
      &gt;&gt;&gt; src_img = data_loader.load_head_phantom(geo.nVoxel)
      &gt;&gt;&gt; proj = tigre.Ax(src_img,geo,angles)
      &gt;&gt;&gt; output = algs.FDK(proj,geo,angles)

      tigre.demos.run() to launch ipython notebook file with examples.


      --------------------------------------------------------------------
      This file is part of the TIGRE Toolbox

      Copyright (c) 2015, University of Bath and
                          CERN-European Organization for Nuclear Research
                          All rights reserved.

      License:            Open Source under BSD.
                          See the full license at
                          https://github.com/CERN/TIGRE/license.txt

      Contact:            tigre.toolbox@gmail.com
      Codes:              https://github.com/CERN/TIGRE/
    ----------------------------------------------------------------------
      Coded by:          MATLAB (original code): Ander Biguri
                         PYTHON : Reuben Lindroos

None
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre>

<span></span><span class="n">imgfdk1</span><span class="o">=</span><span class="n">algs</span><span class="o">.</span><span class="n">FDK</span><span class="p">(</span><span class="n">projections</span><span class="p">,</span><span class="n">geo</span><span class="p">,</span><span class="n">angles</span><span class="p">,</span><span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;ram_lak&#39;</span><span class="p">)</span>
<span class="n">imgfdk2</span><span class="o">=</span><span class="n">algs</span><span class="o">.</span><span class="n">FDK</span><span class="p">(</span><span class="n">projections</span><span class="p">,</span><span class="n">geo</span><span class="p">,</span><span class="n">angles</span><span class="p">,</span><span class="nb">filter</span><span class="o">=</span><span class="s1">&#39;hann&#39;</span><span class="p">)</span>
<span class="c1"># The look quite similar:</span>
<span class="n">tigre</span><span class="o">.</span><span class="n">plotimg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">imgfdk1</span><span class="p">,</span><span class="n">imgfdk2</span><span class="p">)),</span><span class="nb">slice</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/d05_Algorihtms01_8_0.png" src="_images/d05_Algorihtms01_8_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;tigre.utilities.plotimg.plotimg instance at 0x7f740ab0a560&gt;
</pre></div>
</div>
</div>
<p>On the other hand it can be seen that one has bigger errors in the whole image while the other just in the boundaries</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dif1</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">head</span><span class="o">-</span><span class="n">imgfdk1</span><span class="p">)</span>
<span class="n">dif2</span><span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">head</span><span class="o">-</span><span class="n">imgfdk2</span><span class="p">)</span>
<span class="n">tigre</span><span class="o">.</span><span class="n">plotimg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">dif1</span><span class="p">,</span><span class="n">dif2</span><span class="p">)),</span><span class="nb">slice</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/d05_Algorihtms01_10_0.png" src="_images/d05_Algorihtms01_10_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;tigre.utilities.plotimg.plotimg instance at 0x7f7401a845a8&gt;
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython2 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Reuben Lindroos, Ander Biguri

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>